* Get the third line based on a patterned line

Hongyi Zhao wrote:

> Hi all,
> 
> I want to obtain the third line before each matched line.  For
> example:
> 
> ...
> _here_comes_line_a
> _here_comes_line_b
> _here_comes_line_c
> _here_comes_the_matched_line
> ...
> _here_comes_line_d
> _here_comes_line_e
> _here_comes_line_f
> _here_comes_the_matched_line
> ...
> 
> I want to based on the regex matched lines to the third line before
> each matched line, i.e., the  _here_comes_line_a and
> _here_comes_line_d in the above example.  Any hints on this issue?

** method 1
awk '/matched_line/{print s1}{s1=s2;s2=s3;s3=$0}'

** method 2
awk '/matched/{print a[NR-3]}{a[NR]=$0}' file # this one will unnecessarily memorize the whole file...

** method 3
awk '/matched/{print a[NR%3]}{a[NR%3]=$0}'

** method 4
$ tac inputfile | awk '/matched_line/{i=4}!--i' | tac

** method 5
txr 

** 
* DBus and konsole
From KDE 4.0, konsole using DBus in place of dcop for scripting.
 open a new session(tab):
$ qdbus org.kde.konsole /Konsole org.kde.konsole.Konsole.newSession # will return the session number

 send some texts to the session(tab):
$ qdbus org.kde.konsole /Sessions/${session_id} org.kde.konsole.Session.sendText "some text"

 rename the session(tab):
$ qdbus org.kde.konsole /Sessions/${session_id} org.kde.konsole.Session.setTitle 0 "some text" # why there is must be a '0'??


* find out IP address from the MAC address in local net
** using 'arp-scan'
#Quote <<----
[hpt@localhost ~]$ sudo arp-scan --localnet|grep 00:1d:45:20:d5:ff
10.66.65.254    00:1d:45:20:d5:ff       Cisco Systems
[hpt@localhost ~]$
----

** a specil version arping
http://freshmeat.net/projects/arping
But I failed to run it on my f11 machine after installing libnet and libpcap. It always 'Segmentation fault'

* using G3 wireless with company wired net together
Plug in wired network, and dialup, then get this route table:

#Quote <<---
$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.200.1.21    0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
10.66.64.0      0.0.0.0         255.255.254.0   U     1      0        0 eth0
0.0.0.0         10.66.65.254    0.0.0.0         UG    0      0        0 eth0
---

sudo route del default gw 10.66.65.254      # delete the default gw

sudo route add -net 10.0.0.0 netmask 255.0.0.0 gw 10.66.65.254  # using company default gw for company network

sudo route add -net 0.0.0.0 netmask 0.0.0.0 dev ppp0  # others go through my G3 wireless

#Quote <<---
$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.200.1.21    0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
10.66.64.0      0.0.0.0         255.255.254.0   U     1      0        0 eth0
10.0.0.0        10.66.65.254    255.0.0.0       UG    0      0        0 eth0
0.0.0.0         0.0.0.0         0.0.0.0         U     0      0        0 ppp0
---
